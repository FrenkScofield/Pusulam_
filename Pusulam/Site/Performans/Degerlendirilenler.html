<head>
    <script src="/Scripts/Tools.js"></script>
    <script src="../../../assets/global/plugins/nouislider/jquery.nouislider.js"></script>

</head>

<div class="page-head">
    <div class="page-title col-md-12">
        <h1>
            Performans <small>Değerlendirilenler</small>
            <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span>
        </h1>
    </div>
</div>
<div class="row" id="app" style="margin-top:0px!important;">

    <div class="col-md-12">
        <div class="portlet box blue-hoki dd-item" style="border:none">
            <div class="portlet-title dd-handle" data-target='#filters' data-toggle='collapse'>
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Filtrele </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>
            <!-- BEGIN PORTLET-->
            <div class="portlet-body form collapse in" id="filters">
                <form role="form" style="padding:12px 20px">

                    <div class="col-md-3">
                        <c-degerlendirmelistesi controller="Degerlendirilenler"
                                                @OnChange="degerlendirmeSelected">
                        </c-degerlendirmelistesi>
                        <button type="button" class="btn green" style="margin-right: -100px;" @click="Listele()">Listele</button>

                    </div>
                    <div class="row ">
                           
                    </div>
                   
                </form>
            </div>
        </div>
        <div class="portlet box blue-hoki dd-item" style="border:none">
            <div class="portlet-title " data-toggle='collapse'>
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Değerlenen Öğretmenler Listesi </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>

            <div class="portlet-body form">
                <div class="row">
                    <div class="col-sm-12" style="margin-top: 15px !important;">
                        <c-rapor-tur-buton @Yazdir="Yazdir"> </c-rapor-tur-buton>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <form role="form">
                            <div class="portlet light bordered">
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column" id="tblListe">
                                        <thead>
                                            <tr>
                                                <th>Öğretmen Adı Soyadı</th>
                                                <th>Öğretmen T.C. Kimlik No</th>
                                                <th>Kampüs</th>
                                                <th>Kategori</th>
                                                <th>Müdür</th>
                                                <th>Değerlendirme Periyodu</th>
                                                <th>C Kategori Seçimi</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="odd gradeX" v-for="u in LISTE">
                                                <td>{{u.OGRETMEN}}</td>
                                                <td>{{u.TC_OGRETMEN}}</td>
                                                <td>{{u.SUBE}}</td>
                                                <td>{{u.KATEGORI}}</td>
                                                <td>{{u.MUDUR}}</td>
                                                <td>{{u.TARIH}}</td>
                                                <td>{{u.CKATEGORI}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                
            </div>

        </div>
    </div>
</div>
<script src="../../../VueComponents/Genel.js?v=4"></script>
<script src="VueComponents/Filtre.js"></script>

<script>
    var vue = new Vue({
        el: "#app",
        name: "Degerlendirilenler",

        data: {
            TCKIMLIKNO: '',
            OTURUM: '',
            controller: 'Degerlendirilenler',
            LISTE: [],
            ID_PERIYOTTARIH: 0

        },

        mounted() {
            //this.Listele();
        },

        methods: {
            degerlendirmeSelected(ID_PERIYOTTARH) {
                this.ID_PERIYOTTARIH = ID_PERIYOTTARH;
            },
            Listele() {
                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_PERIYOT: this.ID_PERIYOTTARIH
                };
                WebPost(this, this.controller, "DegerlendirilenlerListele", p, '', '', function (data, parent) {
                    vue.LISTE = JSON.parse(data);
                   
                })

            },
            Yazdir(ciktiTuru) {
                if (ciktiTuru == "") {
                    Alert_Warning("Çıktı Türünü Seçiniz.");
                    return;
                }

                window.open('../Rapor.aspx?rapor=Performans.Degerlendirilenler&raporTur=' + ciktiTuru + '&p=' + session.TCKIMLIKNO + ';' + session.OTURUM + ';' + this.ID_PERIYOTTARIH, '_blank');

            }
        }
    });
</script>
<script src="Scripts/PublicMethods.js"></script>
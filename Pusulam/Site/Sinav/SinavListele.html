<link href="assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css" />
<style>
    td {
        vertical-align: middle !important;
    }

    .row {
        margin-top: 10px !important;
    }

    table.dataTable > tbody > tr.child ul li {
        border: 0;
        line-height: 35px;
    }
 
    .table.dataTable > tbody > tr.child ul{
        float:left;
        text-align:left; 
    }
    table.dataTable > tbody > tr.child span.dtr-data{
        float:right
    }

</style>
<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title col-md-12">
        <h1>
            Sınav Listesi <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>

<div class="row" id="app">
    <div class="col-md-12">
        <div class="portlet box blue-hoki dd-item" style="border:none">
            <div class="portlet-title dd-handle" data-toggle='collapse' data-target='#filters' style="cursor:pointer;">
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Filtreler </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>
            <!-- BEGIN PORTLET-->
            <div class="portlet-body form collapse in" id="filters">
                <form role="form" style="padding:12px 20px">
                    <div class="row">
                        <c-donem controller="SinavListele"
                                 @OnChange="DonemSelected">
                        </c-donem>
                    </div>
                    <div class="row">
                        <c-sinavturu controller="SinavListele"
                                     :id_sinavturu="ID_SINAVTURU"
                                     @OnChange="SinavTuruSelected">
                        </c-sinavturu>
                    </div>
                    <div class="row">
                        <c-sinavgrup controller="SinavListele"
                                     :id_kademe3="ID_KADEME3"
                                     @OnChange="SinavGrupSelected">
                        </c-sinavgrup>
                    </div>
                    <div class="row">
                        <label class="control-label col-md-3" style="vertical-align:middle;">Pasif Sınavlar Görünsün</label>
                        <div class="col-md-9" style="height:34px; vertical-align:middle;">
                            <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                <input type="checkbox" v-model="pasifGorunsun" id="pasifGorunsun" class="md-check" v-bind:true-value="true" v-bind:false-value="false" />
                                <label for="pasifGorunsun">
                                    <span></span>
                                    <span class="check"></span>
                                    <span class="box"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group" style="margin-top:10px;">
                            <div class="col-md-12 text-right">
                                <button type="button" class="btn green" @click="SinavListele">Sınav Listele</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-12" v-if="SINAVLISTESI.length>0">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-list font-green"></i>
                    <span class="caption-subject bold font-green uppercase"> Sınav Listesi </span>
                    <span class="caption-helper"></span>
                </div>
            </div>
            <!-- BEGIN PORTLET-->
            <div class="portlet-body form">
                <form role="form">
                    <div class="portlet light bordered">
                        <div class="portlet-body" style="width:100%">
                            <table class="table table-striped table-bordered table-hover table-checkable" id="sinavtable" width="100%">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>İŞLEM</th>
                                        <th>ID</th>
                                        <th>KOD</th>
                                        <th>SINAV ADI</th>
                                        <th>GRUP</th>
                                        <th>KATILIM</th>
                                        <th>HARICI PUAN SIRALAMA ÖĞR. SAYISI</th>
                                        <th>AKTİF</th>
                                        <th>ONLINE   SINAV</th>
                                        <th>ÖZEL</th>
                                        <th>FREKANS HESAPLA</th>
                                        <th>PUAN GİZLE</th>
                                        <th>OPTİK YÜKLEME KAPAT</th>
                                        <th>CEVAP ANAHTARI YÜKLEME KAPAT</th>
                                        <th>TARİH</th>
                                        <th>DURUM</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd gradeX" v-for="u in SINAVLISTESI">
                                        <td></td>
                                        <td>
                                            <div class="row-fluid">
                                                <div class="dropdown clearfix">
                                                    <ul class="nav nav-pills pull-right">
                                                        <li class="dropdown">
                                                            <a class="dropdown-toggle btn green btn-xs" data-toggle="dropdown" href="#">İşlemler<b class="caret"></b></a>
                                                            <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu">
                                                                <li @click="Duzenle(u.ID_SINAV)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-pencil-square-o" /> Düzenle
                                                                    </a>
                                                                </li>
                                                                <li @click="Degerlendir(u)" v-if="ID_SINAVTURU != 15">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Değerlendir
                                                                    </a>
                                                                </li>

                                                                <li class="divider"> </li>
                                                                <li @click="OptikYukle(u.ID_SINAV)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Optik Yükle
                                                                    </a>
                                                                </li>
                                                                <li @click="OptikTanimla(u.ID_SINAV)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Optik Form Tasarla
                                                                    </a>
                                                                </li>

                                                                <li class="divider"> </li>
                                                                <li @click="SinavAktifPasifYap(u)" v-if="u.AKTIF==true">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Pasif Yap
                                                                    </a>
                                                                </li>
                                                                <li @click="SinavAktifPasifYap(u)" v-if="u.AKTIF==false">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Aktif Yap
                                                                    </a>
                                                                </li>

                                                                <li @click="SinavKopyala(u)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Sınav Kopyala
                                                                    </a>
                                                                </li>
                                                                <li @click="OgrenciListesi(u.ID_SINAV)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Öğrenci Listesi
                                                                    </a>
                                                                </li>
                                                                <li class="divider"> </li>
                                                                <li @click="SinavDersListele(u.ID_SINAV)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" /> Soru Düzenle
                                                                    </a>
                                                                </li>
                                                                <li class="divider"> </li>
                                                                <li class="dropdown-submenu pull-left" v-if="u.B_KITAPCIK==true || u.ONLINESINAV==true">
                                                                    <a href="javascript:;">Sınav Özellikleri</a>
                                                                    <ul class="dropdown-menu">
                                                                        <li>
                                                                            <a href="javascript:;" @click="SinavOzellikleri(u,'pdf');">
                                                                                <i class="fa fa-lg fa-files-o" /> PDF
                                                                            </a>
                                                                        </li>
                                                                        <li>
                                                                            <a href="javascript:;" @click="SinavOzellikleri(u,'xlsx');">
                                                                                <i class="fa fa-lg fa-files-o" /> Excel(xlsx)
                                                                            </a>
                                                                        </li>
                                                                        <li>
                                                                            <a href="javascript:;" @click="SinavOzellikleri(u,'xls');">
                                                                                <i class="fa fa-lg fa-files-o" /> Excel(xls)
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </li>
                                                                <li class="dropdown-submenu pull-left" v-if="u.B_KITAPCIK==true || u.ONLINESINAV==true">
                                                                    <a href="javascript:;">Cevap Anahtarı</a>
                                                                    <ul class="dropdown-menu">
                                                                        <li>
                                                                            <a href="javascript:;" @click="CevapAnahtari(u,'pdf');">
                                                                                <i class="fa fa-lg fa-files-o" /> PDF
                                                                            </a>
                                                                        </li>
                                                                        <li>
                                                                            <a href="javascript:;" @click="CevapAnahtari(u,'xlsx');">
                                                                                <i class="fa fa-lg fa-files-o" /> Excel(xlsx)
                                                                            </a>
                                                                        </li>
                                                                        <li>
                                                                            <a href="javascript:;" @click="CevapAnahtari(u,'xls');">
                                                                                <i class="fa fa-lg fa-files-o" /> Excel(xls)
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </li>
                                                                <li class="dropdown-submenu pull-left">
                                                                    <a href="javascript:;">Harici Puan/Sıra Yükleme</a>
                                                                    <ul class="dropdown-menu">
                                                                        <li>
                                                                            <a href="javascript:;" @click="HariciPuanSiraTaslakIndır(u);">
                                                                                <i class="fa fa-lg fa-files-o" /> Taslak İndir
                                                                            </a>
                                                                        </li>
                                                                        <li>
                                                                            <a href="javascript:;" @click="HariciPuanSiraExcelYukle(u);">
                                                                                <i class="fa fa-lg fa-files-o" /> Excel Yükle
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </li>
                                                                <li class="divider"> </li>
                                                                <li @click="DegerLendirmeLoglari(u)">
                                                                    <a href="javascript:;">
                                                                        <i class="fa fa-lg fa-files-o" />  Değerlendirme Logları
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{u.ID_SINAV}}</td>
                                        <td>{{u.KOD}}</td>
                                        <td>{{u.AD}}</td>
                                        <td>{{u.GRUP}}</td>
                                        <td>{{u.KATILIM}}</td>
                                        <td>{{u.HARICIOGRSAY}}</td>
                                        <td>
                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.AKTIF" :id="u.ID_SINAV+'AKTIF'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'AKTIF')" />
                                                    <label :for="u.ID_SINAV+'AKTIF'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.ONLINESINAV" :id="u.ID_SINAV+'ONLINESINAV'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'ONLINESINAV')" />
                                                    <label :for="u.ID_SINAV+'ONLINESINAV'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.OZEL" :id="u.ID_SINAV+'OZEL'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'OZEL')" />
                                                    <label :for="u.ID_SINAV+'OZEL'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <!--<i v-if="u.OZEL" class="fa fa-lg fa-check" style="color:#32c5d2;"></i>
                                            <i v-else="u.OZEL" class="fa fa-lg fa-close" style="color:darkred;"></i>-->
                                        </td>
                                        <td>
                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.FREKANSHESAPLA" :id="u.ID_SINAV+'FREKANSHESAPLA'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'FREKANSHESAPLA')" />
                                                    <label :for="u.ID_SINAV+'FREKANSHESAPLA'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <!--<i v-if="u.FREKANSHESAPLA" class="fa fa-lg fa-check" style="color:#32c5d2;"></i>
                                            <i v-else="u.FREKANSHESAPLA" class="fa fa-lg fa-close" style="color:darkred;"></i>-->
                                        </td>
                                        <td>
                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.PUANGIZLE" :id="u.ID_SINAV+'PUANGIZLE'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'PUANGIZLE')" />
                                                    <label :for="u.ID_SINAV+'PUANGIZLE'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <!--<i v-if="u.PUANGIZLE" class="fa fa-lg fa-check" style="color:#32c5d2;"></i>
                                            <i v-else="u.PUANGIZLE" class="fa fa-lg fa-close" style="color:darkred;"></i>-->
                                        </td>
                                        <td>
                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.YUKLEMEKAPAT" :id="u.ID_SINAV+'YUKLEMEKAPAT'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'YUKLEMEKAPAT')" />
                                                    <label :for="u.ID_SINAV+'YUKLEMEKAPAT'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <!--<i v-if="u.YUKLEMEKAPAT" class="fa fa-lg fa-check" style="color:#32c5d2;"></i>
                                            <i v-else="u.YUKLEMEKAPAT" class="fa fa-lg fa-close" style="color:darkred;"></i>-->
                                        </td>
                                        <td>

                                            <div class="col-md-9" style="height:34px; vertical-align:middle;">
                                                <div class="md-checkbox" style="margin:auto!important; width:20px!important; height:20px; margin:0px; margin-top:6px; display:block;">
                                                    <input type="checkbox" v-model="u.CEVAPANAHTARIYUKLEMEKAPAT" :id="u.ID_SINAV+'CEVAPANAHTARIYUKLEMEKAPAT'" class="md-check" v-bind:true-value="true" v-bind:false-value="false" @click="SinavDurumDegistir(u.ID_SINAV,'CEVAPANAHTARIYUKLEMEKAPAT')" />
                                                    <label :for="u.ID_SINAV+'CEVAPANAHTARIYUKLEMEKAPAT'">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span>
                                                    </label>
                                                </div>
                                            </div>



                                            <!--<i v-if="u.CEVAPANAHTARIYUKLEMEKAPAT" class="fa fa-lg fa-check" style="color:#32c5d2;"></i>
                                            <i v-else="u.CEVAPANAHTARIYUKLEMEKAPAT" class="fa fa-lg fa-close" style="color:darkred;"></i>-->
                                        </td>
                                        <td>{{u.SINAVTARIH}}</td>
                                        <td>{{u.DURUM==3?'OPTİK YÜKLENİYOR':u.DURUM==0?'BEKLEMEDE':u.DURUM==1?'DEĞERLENDİRİLİYOR':'DEĞERLENDİRİLDİ'}}</td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </form>
            </div>
            <!-- END PORTLET-->
        </div>
    </div>

    <div id="SoruDuzenle_modal" class="modal fade" tabindex="-1" data-replace="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Soru Seç</h4>
                </div>

                <div class="modal-body">

                    <div class="form-body form-horizontal">

                        <div class="portlet-body form col-md-12">
                            <form role="form">
                                <div class="portlet light bordered">
                                    <div class="portlet-body">
                                        <div class="row">
                                            <c-sinav-ders ilksecenek="Ders Seçiniz"
                                                          :dersler="dersler"
                                                          :sifirla="sinavDersSifirla"
                                                          @OnChange="SinavDersSelected">
                                            </c-sinav-ders>
                                        </div>
                                        <div class="row">
                                            <c-sinav-ders-soru controller="SinavListele"
                                                               :idsinavders="ID_SINAVDERS"
                                                               @OnChange="SoruSelected">
                                            </c-sinav-ders-soru>
                                        </div>
                                        <div class="row">
                                            <c-soru-islem controller="SinavListele"
                                                          @OnChange="SoruIslemSelected">
                                            </c-soru-islem>
                                        </div>
                                        <div class="row">
                                            <div class="row col-md-12" v-show="ID_SORUISLEM == 3">
                                                <c-checkbox :degisken="siklar"
                                                            @OnChange="CevapSikkiSelected">
                                                </c-checkbox>
                                            </div>
                                        </div>
                                        <div class="row" v-if="SoruIslemList.length>0 ">
                                            <table class="table table-striped table-bordered table-hover table-checkable" id="SoruIslem">
                                                <thead>
                                                    <tr>
                                                        <th>SINAV DERS</th>
                                                        <th>SORU NO</th>
                                                        <th>SORU İŞLEM</th>
                                                        <th>İŞLEMLER</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="u in SoruIslemList">
                                                        <td>{{u.TAKMAAD}}</td>
                                                        <td>{{u.SORUNO}}</td>
                                                        <td>{{u.ISLEM}}</td>
                                                        <td><button type="button" class="btn red" @click="SoruIslemSil(u.ID_SINAVANAHTAR)">Sil</button></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn default" data-dismiss="modal">Kapat</button>
                    <button type="button" class="btn green" data-dismiss="modal" @click="SoruDuzenle()">Kaydet</button>
                </div>
            </div>
        </div>
    </div>
    <div id="OgrenciListesi_modal" class="modal fade in" tabindex="-1" data-replace="true">
        <div class="modal-dialog modal-full">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Öğrenci Listesi</h4>
                </div>

                <div class="modal-body" style="padding-bottom:0px;">
                    <div class="form-body form-horizontal">
                        <div class="row" style="margin:0px;">
                            <div class="portlet-body form col-md-12">
                                <table class="table table-striped table-bordered"
                                       data-height="700"
                                       data-width="100%"
                                       style="margin-bottom:0px; color:#111; width:100%;"
                                       id="TblOgr">
                                    <thead id="thOgr">
                                        <tr>
                                            <th> TC Kimlik No </th>
                                            <th> Ad </th>
                                            <th> Soyad </th>
                                            <th> Sınıf </th>
                                            <th> Okul </th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbOgr">
                                        <tr :id="u.TCKIMLIKNO" style="cursor:pointer;" v-for="u in ListOgrenci">
                                            <td>{{u.TCKIMLIKNO}}</td>
                                            <td>{{u.AD}}</td>
                                            <td>{{u.SOYAD}}</td>
                                            <td>{{u.SINIF}}</td>
                                            <td>{{u.SUBEAD}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="padding-top:0px;">
                    <button type="button" class="btn red" @click="OgrenciSil">Seçili Öğrencileri Sil</button>
                    <button type="button" class="btn default" data-dismiss="modal">Kapat</button>
                    <!--<button type="button" class="btn green" data-dismiss="modal" @click="OptikDosyaIcerikDuzenle()">Kaydet</button>-->
                </div>
            </div>
        </div>
    </div>

    <div id="HariciPuanSira_modal" class="modal fade" tabindex="-1" data-replace="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Öğrenci Harici Puan ve Sıralama Girişi</h4>
                </div>
                <div class="modal-body">
                    <div class="form-body form-horizontal">
                        <div class="portlet-body form col-md-12">
                            <div class="fileinput fileinput-new" data-provides="fileinput">
                                <span class="fileinput-preview thumbnail" style="max-width: 1000px; max-height: 1000px;"> </span>
                                <span>
                                    <span class="btn default btn-file">
                                        <span class="fileinput-new yellow"> Öğrenci Harici Puan ve Sıralama Excel'den Yükle </span>
                                        <span class="fileinput-exists"> Değiştir </span>
                                        <input type="file" name="..." accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" id="CADosya" data-preview-file-type="text">
                                    </span>
                                    <a href="javascript:;" class="btn red fileinput-exists" data-dismiss="fileinput"> Sil </a>
                                    <a href="javascript:;" @click="HariciPuanSiraTaslakYukle()" class="btn green fileinput-exists" data-dismiss="modal"> Tamam </a>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn default" data-dismiss="modal">Kapat</button>
                    <!--<button type="button" class="btn green" data-dismiss="modal" @click="SoruDuzenle()">Kaydet</button>-->
                </div>
            </div>
        </div>
    </div>

    <div id="DegerlendirmeLog_modal" class="modal fade" tabindex="-1" data-replace="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Degerlendirme Logları</h4>
                </div>

                <div class="modal-body">
                    <div class="form-body form-horizontal">
                        <div class="row" style="margin:0px;">
                            <div class="portlet-body form col-md-12">
                                <form role="form">
                                    <div class="portlet light bordered">
                                        <div class="portlet-body" style="max-height:500px; overflow:auto">
                                            <table class="table table-striped table-bordered"
                                                   data-height="700"
                                                   data-width="100%"
                                                   style="margin-bottom:0px; color:#111; width:100%;"
                                                   id="TblDegerlendirmeLog">
                                                <thead>
                                                    <tr>
                                                        <th> Değerlendirme Tarihi </th>
                                                        <th> Sınav Id </th>
                                                        <th> Değerlendiren </th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr style="cursor:pointer;" v-for="u in LIST_DEGERLENDIRME_LOG">
                                                        <td>{{u.DegerlendirmeTarihi}}</td>
                                                        <td>{{u.SinavID}}</td>
                                                        <td>{{u.Degerlendiren}}</td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn default" data-dismiss="modal">Kapat</button>
                    <!--<button type="button" class="btn green" data-dismiss="modal" @click="SoruDuzenle()">Kaydet</button>-->
                </div>
            </div>
        </div>
    </div>
</div>
<script src="VueComponents/SinavFiltreleri.js?v=4"></script>

<script>
    var vue = new Vue({

        el: "#app",
        name: "SinavListele.html",

        data: {
            DONEM: '',
            ID_SINAVTURU: 0,
            ID_KADEME3: 0,
            SINAVLISTESI: [],
            TIMER: null,
            pasifGorunsun: false,
            ListOgrenci: [],
            idSinavTuru: 0,
            idKademe3: 0,
            SORUNO: 0,
            ID_SINAVDERS: 0,
            dersler: [],
            sorular: [],
            ID_SORUISLEM: 0,
            htmlSoruKarsilik: '',
            kitapcik: [],
            siklar: [],
            SoruIslemList: [],
            ID_SINAV: 0,
            sinavDersSifirla: 0,
            tblSorular: null,
            OLISTID_SINAV: 0,
            idSinavHarici: 0,

            AKTIF: false,
            ONLINESINAV: false,
            OZEL: false,
            FREKANSHESAPLA: false,
            PUANGIZLE: false,
            YUKLEMEKAPAT: false,
            CEVAPANAHTARIYUKLEMEKAPAT: false,
            LIST_DEGERLENDIRME_LOG: []
        },

        mounted() {
            this.siklar.push(
                { VALUE: 1, AD: 'A', SELECTED: false },
                { VALUE: 2, AD: 'B', SELECTED: false },
                { VALUE: 3, AD: 'C', SELECTED: false },
                { VALUE: 4, AD: 'D', SELECTED: false },
                { VALUE: 5, AD: 'E', SELECTED: false },
                { VALUE: 6, AD: 'F', SELECTED: false })

            var _this = this;
            $("#TblOgr").DataTable().destroy();
            _this.$nextTick(function () {
                _this.ListeOlustur('TblOgr');
            });


            this.$nextTick(function () {
                if (parseInt(getParameterByName("ID_SINAV")) > 0) {
                    var p = {
                        TCKIMLIKNO: session.TCKIMLIKNO,
                        OTURUM: session.OTURUM,
                        ID_SINAV: parseInt(getParameterByName("ID_SINAV")),
                    };

                    WebPost(this, "SinavListele", "SinavBilgiGetir", p, '#sinavtable', 'Yükleniyor..', function (data, parent) {
                        if (data != null) {
                            var k = JSON.parse(data)[0];

                            parent.ID_SINAVTURU = parseInt(k["ID_SINAVTURU"]);
                            parent.ID_KADEME3 = parseInt(k["ID_KADEME3"]);
                            parent.DONEM = k["DONEM"];

                            parent.SinavListele();
                        }
                    });
                }
            });


        },

        methods: {

            DonemSelected(DONEM) {
                this.DONEM = DONEM;
            },
            SinavGrupSelected(ID_KADEME3) {
                this.ID_KADEME3 = ID_KADEME3;
            },
            SinavTuruSelected(ID_SINAVTURU) {
                this.ID_SINAVTURU = ID_SINAVTURU
            },

            SinavDersSelected(item) {
                this.ID_SINAVDERS = item;
            },
            SoruSelected(item) {
                this.SORUNO = item;
            },
            CevapSikkiSelected(item) {
                this.siklar = item;
            },
            SoruIslemSelected(item) {
                this.ID_SORUISLEM = item;
            },

            SinavDurumDegistir(idSinav, islem) {
                //console.log(idSinav);
                //console.log(islem);
                //console.log($("#" + idSinav + islem).is(":checked"));

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: idSinav,
                    DURUM: islem,
                    DURUMDEGER: $("#" + idSinav + islem).is(":checked")
                };

                console.log(p);
                WebPost(this, "SinavListele", "SinavDurumlariDegistir", p, '#sinavtable', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        // parent.SinavListele();
                        if (data == 1) {
                            Alert_Info("Sınavın " + islem + " Özelliği Düzenlendi");
                        }
                        else {
                            Alert_Info("Sınavın " + islem + " Özelliği Düzenlenemedi");
                        }
                    }
                    else {
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });
            },

            SinavListele() {
                var _this = this;

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    DONEM: this.DONEM,
                    ID_SINAVTURU: this.ID_SINAVTURU,
                    ID_KADEME3: this.ID_KADEME3,

                };

                WebPost(this, "SinavListele", _this.pasifGorunsun ? "SinavListelePasifDahil" : "SinavListeleKademeDonem", p, '#sinavtable', 'Yükleniyor..', function (data, parent) {
                    if (data != null && data.length > 0) {
                        _this.SINAVLISTESI = data;
                        $("#sinavtable").DataTable().destroy();
                        _this.$nextTick(function () {
                            _this.ListeOlustur('sinavtable');
                        });
                        var cont = false;
                        for (var i = 0; i < data.length; i++) {
                            if (data[i].DURUM == 1 || data[i].DURUM == 3) {
                                cont = true;
                            }
                        }
                        if (!cont) {
                            if (parent.TIMER != null) {
                                clearInterval(parent.TIMER);
                                parent.TIMER = null;
                            }
                        } else {
                            if (parent.TIMER == null) {
                                parent.TIMER = setInterval(function () { parent.SinavListele(); }, 20000);
                            }
                        }

                        $('#filters').collapse();

                        window.setTimeout(function () {
                            $("#sinavtable").parent().removeClass("table-scrollable");
                        }, 50);
                    }
                    else {
                        _this.SINAVLISTESI = [];
                        if (parent.TIMER != null) {
                            clearInterval(parent.TIMER);
                            parent.TIMER = null;
                        }
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });
            },
            Duzenle(id) {
                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: id
                };
                WebPost(this, "SinavListele", "SinavDuzenleYetki", p, '', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        if (data == 0) {
                            Alert_Error("Yetkiniz bulunmamaktadır");
                            return;
                        }
                        else if (data == 1) {
                            parent.SinavListele();
                            window.location.replace('/anasayfa.html#Sinav/SinavTanimla?ID_SINAV=' + id);
                        }
                        else if (data == 2) {
                            Alert_OkCancelConfirm("Uyarı!", "Bu sınav aktif devam etmek ister misiniz?", function () { window.location.replace('/anasayfa.html#Sinav/SinavTanimla?ID_SINAV=' + id) }, function () { return });
                            //Alert_Info("Bu sınav şu anda kullanılıyor devam etmek istediğinize emin misiniz?");
                            parent.SinavListele();

                        }

                    }
                });

            },
            Degerlendir(u) {
                if (u.DURUM != 3) {
                    if (u.DURUM != 1) {
                        var p = {
                            TCKIMLIKNO: session.TCKIMLIKNO,
                            OTURUM: session.OTURUM,
                            ID_SINAV: u.ID_SINAV
                        };

                        WebPost(this, "SinavListele", "SinavDegerlendir", p, '#sinavtable', 'Yükleniyor..', function (data, parent) {
                            if (data) {
                                parent.SinavListele();
                                if (parent.TIMER == null) {
                                    parent.TIMER = setInterval(function () { parent.SinavListele(); }, 15000);
                                }
                            }
                            else {
                                Alert_Warning("Liste Bulunamadı!");
                            }
                        })
                    } else {
                        Alert_Warning("Bu sınav zaten değerlendiriliyor!");
                    }
                } else {
                    Alert_Warning("Optik yükleme yapılıyor daha sonra tekrar deneyiniz!");
                }
            },
            SinavAktifPasifYap(u) {

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: u.ID_SINAV
                };

                WebPost(this, "SinavListele", "SinavAktifPasifYap", p, '#sinavtable', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        parent.SinavListele();
                        if (data == 1) {
                            Alert_Info("Sınav Aktif Yapıldı");
                        }
                        else {
                            Alert_Info("Sınav Pasif Yapıldı");
                        }
                    }
                    else {
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });
            },

            OgrenciListesi(ID_SINAV) {
                this.OLISTID_SINAV = ID_SINAV;
                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: ID_SINAV
                };
                var _this = this;
                this.ListOgrenci = [];
                $("#TblOgr").DataTable().destroy();
                WebPost(this, "SinavListele", "OgrenciListelebySinav", p, '#OgrenciListesi_modal', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {

                        $("#OgrenciListesi_modal").modal();
                        parent.ListOgrenci = JSON.parse(data)[0].t1;  // veriler

                        _this.$nextTick(function () {
                            _this.ListeOlustur('TblOgr');
                        });
                    }
                    else {
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });

                // $("#TblOgr").DataTable().destroy();
            },
            SinavKopyala(u) {
                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: u.ID_SINAV
                };
                var _this = this;
                WebPost(this, "SinavListele", "SinavKopyala", p, '#sinavtable', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        Alert_Info("Sınav Kopyalama İşlemi Yapıldı.");
                        parent.SinavListele();
                    }
                    else {
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });
            },
            SinavOzellikleri(u, raporTuru) {
                window.open('../Rapor.aspx?rapor=Sinav.SinavOzellikleri&raporTur=' + raporTuru + '&p=' + session.TCKIMLIKNO + ';' + session.OTURUM + ';' + u.ID_SINAV, '_blank');;
                return;
            },
            CevapAnahtari(u, raporTuru) {
                window.open('../Rapor.aspx?rapor=Sinav.CevapAnahtari&raporTur=' + raporTuru + '&p=' + session.TCKIMLIKNO + ';' + session.OTURUM + ';' + u.ID_SINAV, '_blank');
                return;
            },
            OptikYukle(id) {
                window.location.replace('/anasayfa.html#Sinav/OptikYukle?ID_SINAV=' + id);
            },
            OptikTanimla(id) {
                window.location.replace('/anasayfa.html#Sinav/OptikTanimla?ID_SINAV=' + id);
            },
            SinavDersListele(ID_SINAV) {
                var _this = this;
                _this.ID_SINAV = ID_SINAV;
                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: ID_SINAV
                };
                this.dersler = [];
                WebPost(this, "SinavListele", "SinavDersleriListele", p, '#SoruDuzenle_modal', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        parent.dersler = JSON.parse(data)[0].t1  // veriler
                        $("#SoruDuzenle_modal").modal();
                    }
                    else {
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });
                _this.SoruIslemList = [];
                WebPost(this, "SinavListele", "SinavSoruIslemleriListele", p, '#SoruDuzenle_modal', 'Yükleniyor..', function (data, parent) {
                    if (JSON.parse(data)[0].t1 != null || JSON.parse(data)[0].t1 != undefined) {
                        _this.SoruIslemList = JSON.parse(data)[0].t1  // veriler
                    }
                });
            },
            SoruDuzenle() {
                if (this.ID_SORUISLEM == 0 || this.ID_SORUISLEM == undefined
                    || this.ID_SINAVDERS == 0 || this.ID_SINAVDERS == undefined
                    || this.SORUNO == 0 || this.SORUNO == undefined
                ) {
                    Alert_Warning("İşlem yapılacak soruyu seciniz seçiniz !!!");
                    return;
                }
                var OGRENCICEVAP = [];
                if (this.ID_SORUISLEM == 3) {

                    //var OGRENCICEVAPtemp = $.grep(this.siklar, function (n, i) {
                    //    return n.SELECTED == true;
                    //});
                    //$.each(OGRENCICEVAPtemp, function (j, el) {
                    //    OGRENCICEVAP.push(el.AD);
                    //});
                    $.each(this.siklar, function (j, el) {
                        if (el.SELECTED == true) {
                            OGRENCICEVAP.push(el.AD);
                        }
                    });

                    if (OGRENCICEVAP.length == 0) {
                        Alert_Warning("Doğru kabul edilecek şıkları seçiniz !!!");
                        return;
                    }
                }

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAVDERS: this.ID_SINAVDERS,
                    SORUNO: this.SORUNO,
                    ID_SORUISLEM: this.ID_SORUISLEM,
                    OGRENCICEVAP: JSON.stringify(OGRENCICEVAP)
                };
                var _this = this;
                WebPost(this, "SinavListele", "SinavSoruIslem", p, '#SoruDuzenle_modal', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        Alert_Info("Soru Düzenleme İşlemi tamamlandı...");
                        parent.SinavListele();
                    }
                    else {
                        Alert_Warning("Liste Bulunamadı!");
                    }
                });

                var idSinavDers = _this.ID_SINAVDERS;
                _this.ID_SINAVDERS = 0;
                _this.sinavDersSifirla++;
                //_this.ID_SINAVDERS = idSinavDers;

            },

            SoruIslemSil(ID_SINAVANAHTAR) {
                var _this = this;
                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAVANAHTAR: ID_SINAVANAHTAR,
                    ID_SINAV: _this.ID_SINAV
                };
                _this.SoruIslemList = [];
                WebPost(this, "SinavListele", "SinavSoruIslemSil", p, '#SoruDuzenle_modal', 'Yükleniyor..', function (data, parent) {
                    if (JSON.parse(data)[0].t1 != null || JSON.parse(data)[0].t1 != undefined) {
                        _this.SoruIslemList = JSON.parse(data)[0].t1
                        //_this.SinavDersListele(_this.ID_SINAV);
                        Alert_Info("Soru Silme İşlemi tamamlandı...");
                    }
                });
            },

            ListeOlustur(tabloAdi) {

                this.tblSorular = $('#' + tabloAdi).DataTable(
                    {

                        select: 'multiple',
                        "aaSorting": [[0, 'asc']],
                        "responsive": "true",

                        language: {

                            "url": "./Utility/dil.json"
                            ,
                            "select": {
                                "rows": "%d satır seçildi."
                            }
                        },
                     
                        columnDefs: [
                             { type: 'de_date', targets: 13 }
                        ]
                    });
            },

            getObjects(obj, key, val) {
                var objects = [];
                for (var i in obj) {
                    if (!obj.hasOwnProperty(i)) continue;
                    if (typeof obj[i] == 'object') {
                        objects = objects.concat(this.getObjects(obj[i], key, val));
                    } else if (i == key && obj[key] == val) {
                        objects.push(obj);
                    }
                }
                return objects;
            },

            OgrenciSil() {
                var count = vue.tblSorular.rows({ selected: true }).count();
                var TCLIST = [];
                if (count > 0) {
                    Alert_Confirm("Emin misiniz?", "Seçili öğrenciler silinsin mi? Sıralamalar için tekrar değerlendirilmesi gerekebilir.", function () {
                        $.each(vue.tblSorular.rows({ selected: true }).data(), function (index, value) {
                            TCLIST.push(this.DT_RowId);
                        });

                        var p = { TCKIMLIKNO: session.TCKIMLIKNO, OTURUM: session.OTURUM, ID_SINAV: vue.OLISTID_SINAV, TCLIST: JSON.stringify(TCLIST) };
                        WebPost(vue, "SinavListele", "OgrenciSil", p, '', '', function (data, parent) {
                            if (data == true) {
                                parent.SinavListele();
                                parent.OgrenciListesi(vue.OLISTID_SINAV);
                            }
                        });
                    });
                } else {
                    Alert_Info("Seçili öğrenci yok...");
                }
            },

            HariciPuanSiraTaslakIndır(u) {
                window.open('../Rapor.aspx?rapor=Sinav.HariciPuanSiraTaslak&raporTur=XLS&p=' + session.TCKIMLIKNO + ';' + session.OTURUM + ';' + u.ID_SINAV, '_blank');
                return;
            },
            HariciPuanSiraExcelYukle(u) {
                this.idSinavHarici = u.ID_SINAV;
                $("#HariciPuanSira_modal").modal();
            },

            HariciPuanSiraTaslakYukle() {
                var guid = '';
                var dosyaadi = '';
                var _this = this;
                var dosya = document.getElementById('CADosya').files;
                dosyaadi = $("#CADosya").val().replace(/^.*[\\\/]/, '');
                if (dosya.length == 0) {
                    Alert_Info('Lütfen Dosya Seçiniz.');
                    return;
                }

                HariciPuanSiraTaslakYukle(dosya, function (response) {

                    $('.fileinput').fileinput("clear");
                    var json = JSON.parse(response);



                    var p = {
                        TCKIMLIKNO: session.TCKIMLIKNO,
                        OTURUM: session.OTURUM,
                        ID_SINAV: vue.idSinavHarici,
                        SQLJSON: JSON.stringify(json)
                    };


                    WebPost(vue, "SinavListele", "HariciPuanSiraTaslakYukle", p, '', '', function (data, parent) {
                        if (data > 0) {

                            $.grep(vue.SINAVLISTESI, function (el, j) { return el.ID_SINAV == vue.idSinavHarici; })[0].HARICIOGRSAY = data;

                            Alert_Info(data + " Öğrencinin Puan ve Sıralamaları Düzenlenmiştir.");
                        } else {
                            Alert_Warning("Öğrencilerin Puan ve Sıralamaları Düzenlenememiştir.");
                        }
                    }, 'RAISERROR');
                });
            },
            DegerLendirmeLoglari(u) {
                debugger
                this.idSinavHarici = u.ID_SINAV;

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_SINAV: u.ID_SINAV
                };
                this.LIST_DEGERLENDIRME_LOG = [];
                WebPost(this, "SinavListele", "SinavDegerlendirLog", p, '#TblDegerlendirmeLog', 'Yükleniyor..', function (data, parent) {
                    if (data != null || data != undefined) {
                        vue.LIST_DEGERLENDIRME_LOG = JSON.parse(data);
                    }
                    else {
                        Alert_Warning("Değerlendirme Bulunamadı!");
                    }
                });


                $("#DegerlendirmeLog_modal").modal();
            }
        }
    });
</script>
<script src="Scripts/PublicMethods.js"></script>
<script src="assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>


<link href="assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" type="text/css" />
<div class="page-head">
    <div class="page-title col-md-12">
        <h1> Kademe Listesi <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span> </h1>
    </div>
</div>

<div class="row" id="app">
    <div class="col-md-12" v-if="LISTE.length>0">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-list font-green"></i>
                    <span class="caption-subject bold font-green uppercase"> Kademe Genel Klasör Link </span>
                    <span class="caption-helper"></span>
                </div>
            </div>
            <div class="portlet-body form">
                <div class="row">
                    <table class="table table-striped table-bordered table-hover table-checkable" style="margin: 0px;">
                        <thead>
                            <tr>
                                <th> Sınıf Düzeyi </th>
                                <th> Genel Klasör Link</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="u in LISTE">
                                <td> {{u.AD}} </td>
                                <td>
                                    <div v-for="k in u.K2">
                                        <label class="col-md-2" style="text-align:right">
                                            {{k.AD}}
                                        </label>
                                        <div class="col-md-10">
                                            <input type="url" class="form-control" v-model="k.LINK" />
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="form-group col-md-12 text-right" style="margin-top:10px;">
                        <button type="button" class="btn green" @click="Kaydet">Kaydet</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var vue = new Vue({

        el: "#app",
        name: "OnlineDersGenelKlasor",

        data: {
            TCKIMLIKNO: '',
            OTURUM: '',
            controller: 'OnlineDersGenelKlasor',

            LISTE: [],
        },

        mounted() {

            this.TCKIMLIKNO = session.TCKIMLIKNO;
            this.OTURUM = session.OTURUM;
            this.Listele();
        },

        methods: {

            Listele() {

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                };
                this.LISTE = [];

                WebPost(this, this.controller, "GenelKlasorListele", p, '', '', function (data, parent) {
                    if (data != '[]')
                        vue.LISTE = JSON.parse(data);
                });

            },
            Kaydet() {

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    SQLJSON: JSON.stringify(this.LISTE)
                };

                WebPost(this, this.controller, "GenelKlasorKaydet", p, '', '', function (data, parent) {
                    (data)
                        ? Alert_Info("Kayıt İşlemi Tamamlandı")
                        : Alert_Error("Hata...");
                });

            },

        }
    });
</script>
<script src="Scripts/PublicMethods.js"></script>

<script src="assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="assets/global/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.tr.min.js" type="text/javascript"></script>
<script src="assets/pages/scripts/components-date-time-pickers.min.js" type="text/javascript"></script>
<style>
    td {
        vertical-align: middle !important;
    }

    .row {
        margin-top: 10px !important;
    }
</style>
<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title col-md-12">
        <h1>
            Tercih Listesi <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>

<div class="row" id="app">
    <div class="col-md-12">
        <div class="portlet box blue-hoki dd-item" style="border:none">
            <div class="portlet-title dd-handle" data-toggle='collapse' data-target='#filters' style="cursor:pointer;">
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Filtreler </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>
            <!-- BEGIN PORTLET-->
            <div class="portlet-body form collapse in" id="filters">
                <form role="form" style="padding:12px 20px">
                    <!--<div class="row">
                        <c-donem :controller="controller"
                                      @OnChange="DonemSelected">
                        </c-donem>
                    </div>-->
                    <div class="row">
                        <c-sube-multi :controller="controller"
                                      @OnChange="SubeSelected">
                        </c-sube-multi>
                    </div>


                    <div class="row">
                        <div class="form-group" style="margin-top:10px;">
                            <div class="col-md-3">Rapor Türü</div>
                            <c-rapor-tur-buton colmd="8"
                                               @yazdir="Yazdir">
                            </c-rapor-tur-buton>
                        </div>
                    </div>


                </form>
            </div>
        </div>
    </div>

</div>
<script src="VueComponents/Filtre.js"></script>
<script src="../../VueComponents/Genel.js"></script>

<script>
    var vue = new Vue({

        el: "#app",
        name: "TercihListeRapor",

        data: {
            controller: 'TercihListeRapor',
            ID_SUBELIST: [],
            //DONEM: '',
        },

        mounted() { },

        methods: {

            SubeSelected(val) {
                this.ID_SUBELIST = val;
            },
            //DonemSelected(val) {
            //    this.DONEM = val;
            //},

    
            Yazdir(val) {
                if (val == "" || val == undefined || val == null) {
                    Alert_Warning("Rapor Türünü Seçiniz.!");
                    return;
                }
                else if (this.ID_SUBELIST == []) {
                    Alert_Warning("Şube Seçiniz.!");
                    return;
                }
                else {                  
                    
                    window.open("Rapor.aspx?raporTur=" + val + "&rapor=OSYM.TercihListeRapor&p="
                        + session.TCKIMLIKNO + ";"
                        + session.OTURUM + ';'
                        //+ this.DONEM + ';'
                        + JSON.stringify(this.ID_SUBELIST)
                    );
                }
            }


        },
        watch: {
            ID_SUBELIST() {
                this.ID_SUBELIST = this.ID_SUBELIST == undefined || this.ID_SUBELIST == null ? [] : this.ID_SUBELIST;
            },
        },
    });
</script>
<script src="Scripts/PublicMethods.js"></script>
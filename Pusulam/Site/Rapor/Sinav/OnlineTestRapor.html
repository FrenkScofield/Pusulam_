<style>
    td {
        vertical-align: middle !important;
    }

    .row {
        margin-top: 10px !important;
    }
</style>
<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title col-md-12">
        <h1>
            Online Test Rapor <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>

<div class="row" id="app">
    <div class="col-md-12">
        <div class="portlet box green-haze dd-item" style="border:none; margin-bottom:0px!important;">
            <div class="portlet-title dd-handle" data-toggle='collapse' data-target='#filters' style="cursor:pointer;">
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Filtreler </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>
            <div class="portlet-body form collapse in" id="filters">
                <div id="FiltreDiv" class="portlet light col-md-12" style="margin:0px; border-bottom-style: solid;border-bottom-width: 3px;border-bottom-color: rgb(0, 173, 239);">
                    <div class="portlet-body">
                        <div class="form-inline">
                            <div class="row">
                                <c-donem controller="OnlineTestRapor"
                                         @OnChange="DonemSelected">
                                </c-donem>
                                <c-sube controller="OnlineTestRapor"
                                        @OnChange="SubeSelected">
                                </c-sube>
                                <c-kademe3 controller="OnlineTestRapor"
                                           :idsube="idsube"
                                           @OnChange="Kademe3Selected">
                                </c-kademe3>
                                
                                <c-test-sinav-abidik controller="OnlineTestRapor"
                                              :idkademe3="idkademe3"
                                               @OnChange="SinavSelected">
                                </c-test-sinav-abidik>

                               
                            </div>
                            <div class="row">
                                <input style="float:right;margin: 10px;" type="button" class="btn btn-success" @click="Raporla" value="Raporla">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12" v-show="Rapor.length>0">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-list font-green"></i>
                    <span class="caption-subject bold font-green uppercase"> Online Test Rapor Listesi </span>
                    <span class="caption-helper"></span>
                </div>
            </div>
            <!-- BEGIN PORTLET-->
            <div class="portlet-body form">
                <form role="form">
                    <div class="portlet light bordered">
                        <div class="portlet-body">
                            <table class="table table-striped table-bordered table-hover table-checkable order-column" id="sample_1">
                                <thead>
                                    <tr>
                                        <th>T.C Kimlik No</th>
                                        <th>Ad</th>
                                        <th>Soyad</th>
                                        <th>Doğru</th>
                                        <th>Yanlış</th>
                                        <th>Boş</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd gradeX" v-for="u in Rapor">
                                        <td>{{u.TCKIMLIKNO}}</td>
                                        <td>{{u.AD}}</td>
                                        <td>{{u.SOYAD}}</td>
                                        <td>{{u.DOGRU}}</td>
                                        <td>{{u.YANLIS}}</td>
                                        <td>{{u.BOS}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </form>
            </div>
            <!-- END PORTLET-->
        </div>
    </div>

</div>
<script src="/VueComponents/SinavFiltreleri.js?v=4"></script>
<script src="/VueComponents/GenelSinavRaporuFiltreleri.js?v=18"></script>
<script src="/VueComponents/DenemeSinavRaporlariFiltreleri.js?v=5"></script>
<script>
    var vue = new Vue({

        el: "#app",
        name: "OnlineTestRapor.html",

        data: {
            contoller: 'OnlineTestRapor',
            DONEM: '',
            idkademe3: 0,
            idsinavturu: 0,
            idsube: 0,
            Liste: [],
            SelectedID: 0,
            Rapor:[],
        },

        mounted() {
        },

        methods: {

            DonemSelected(item) {
                this.DONEM = item;
            },
            SubeSelected(item) {
                this.idsube =item;
                
            },
            Kademe3Selected(item) {
                this.idkademe3 = item;
                
                //var p = {
                //    TCKIMLIKNO: session.TCKIMLIKNO,
                //    OTURUM: session.OTURUM,
                //    ID_KADEME3: this.idkademe3,
                //    DONEM: this.DONEM
                //};
                //WebPost(this, this.contoller, "SinavBilgiGetir", p, '', 'Yükleniyor..', function (data, parent) {
                //    if (data != null) {
                //        vue.Liste = JSON.parse(data);

                //    }                  
                //});
            },
            SinavSelected(item) {
                this.ID_SINAV = item;
            },
            SinavTuruSelected(item) {
                this.idsinavturu = item;
            },
            SinifSelected(item) {
                this.idsinif = item;
            },
            Raporla() {

                var p = {
                    TCKIMLIKNO: session.TCKIMLIKNO,
                    OTURUM: session.OTURUM,
                    ID_KADEME3: this.idkademe3,
                    DONEM: this.DONEM,
                    ID_SUBE: this.idsube,
                    ID_SINAV: this.ID_SINAV
                };
                WebPost(this, this.contoller, "SinavRaporListele", p, '', 'Yükleniyor..', function (data, parent) {
                    if (data != null) {
                        vue.Rapor= JSON.parse(data);
                    }
                });
            }
            
        }
    });
</script>
<script src="Scripts/PublicMethods.js"></script>

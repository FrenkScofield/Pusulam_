<head>
    <script src="../../../Scripts/Rapor/amcharts.js"></script>
    <script src="../../../Scripts/Rapor/jquery.easypiechart.js"></script>
    <script src="../../../Scripts/Rapor/light.js"></script>
    <script src="../../../Scripts/Rapor/serial.js"></script>
</head>
<style>
    /*.table-bordered, .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > td, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {
        border: 1px solid #8A9198;
    }*/
    table {
        font-family: 'Open Sans', sans-serif;
        width: 100%;
        border-collapse: collapse;
        border: 3px solid #44475C;
        margin: 10px 10px 0 10px;
    }

        table th {
            text-transform: uppercase;
            text-align: left;
            background: #44475C;
            color: #FFF;
            padding: 8px;
            min-width: 30px;
        }

        table td {
            text-align: left;
            padding: 8px;
            border-right: 2px solid #7D82A8;
            font-size: 10px !important;
            cursor: default !important;
        }

    #PuanTablo {
        border: 3px solid #f58320;
    }

        #PuanTablo th {
            text-transform: uppercase;
            text-align: left;
            background: #f58320;
            color: #FFF;
            padding: 8px;
            min-width: 30px;
        }

        #PuanTablo td {
            text-align: left;
            padding: 8px;
            border-right: 2px solid #f58320;
            font-size: 10px !important;
            cursor: default !important;
        }

        #PuanTablo tbody tr:nth-child(2n) td {
            background: #e9c6a8;
        }


    table td:last-child {
        border-right: none;
    }

    table tbody tr:nth-child(2n) td {
        background: #D4D8F9;
    }

    .badge-danger {
        background-color: #F34C59;
        font-size: 9px !important;
    }
</style>


<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title col-md-12">
        <h1>
            Gelişim Raporu <small>Öğrenci Gelişim Raporu</small> <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>

<div class="row" id="app">
    <div class="col-md-12">
        <div class="portlet box green-haze dd-item" style="border:none">
            <div class="portlet-title dd-handle" data-toggle='collapse' data-target='#filters' style="cursor:pointer;">
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Filtreler </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>
            <div class="portlet-body form collapse in" id="filters">

                <div class="portlet light col-md-12" id="FiltreDivOgretmen" style="margin:0px; border-bottom-style: solid;border-bottom-width: 3px;border-bottom-color: rgb(0, 173, 239);">
                    <div class="portlet-body">
                        <div class="form-inline">
                            <div class="row">
                                <c-donem controller="OgrenciBelgeGelisimRaporu"
                                         @OnChange="DonemSelected">
                                </c-donem>
                                <c-sube controller="OgrenciBelgeGelisimRaporu"
                                        @OnChange="SubeSelected">
                                </c-sube>
                                <c-kademe3 controller="OgrenciBelgeGelisimRaporu"
                                           :idsube="idsube"
                                           @OnChange="Kademe3Selected">
                                </c-kademe3>
                                <c-sinav-turu-obkonuanaliz controller="OgrenciBelgeGelisimRaporu"
                                                           :idkademe3="idkademe3"
                                                           @OnChange="SinavTuruSelected">
                                </c-sinav-turu-obkonuanaliz>
                                <c-sinav-multi-obkonuanaliz controller="OgrenciBelgeGelisimRaporu"
                                                            :idsinavturu="idsinavturu"
                                                            :donem="DONEM"
                                                            :idkademe3="idkademe3"
                                                            @OnChange="SinavSelected">
                                </c-sinav-multi-obkonuanaliz>
                                <c-sinif controller="OgrenciBelgeGelisimRaporu"
                                         :idsube="idsube"
                                         :idkademe3="idkademe3"
                                         @OnChange="SinifSelected">
                                </c-sinif>
                                <c-ogrenci controller="OgrenciBelgeGelisimRaporu"
                                           :idsinif="idsinif"
                                           @OnChange="OgrenciSelected">
                                </c-ogrenci>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-md-line-input">
                            <div class="col-md-3">
                                <label style="display:block;" for="limit">Uyarı Metni: </label>
                                <textarea id="limit" style="resize:none; width:100%; height:150px;" class="form-control" v-model="aciklama"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-md-line-input">
                            <div class="col-md-3">
                                <label for="RAPORLU" style="cursor:pointer;margin:0px;">Öğretmen Öğrenci Değerlendirme</label>
                                <div id="RAPORLUDIV" class="md-checkbox" style="width:20px!important; display:inline-block;">
                                    <input type="checkbox" v-model="OOD" id="RAPORLU" class="md-check" v-bind:true-value="true" v-bind:false-value="false" />
                                    <label for="RAPORLU">
                                        <span></span>
                                        <span class="check"></span>
                                        <span class="box"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-md-line-input">
                            <div class="col-md-3">
                                <label for="RAPORLU2" style="cursor:pointer;margin:0px;">Etüt Raporu</label>
                                <div id="RAPORLUDIV2" class="md-checkbox" style="width:20px!important; display:inline-block;">
                                    <input type="checkbox" v-model="ETUTRAPORU" id="RAPORLU2" class="md-check" v-bind:true-value="true" v-bind:false-value="false" />
                                    <label for="RAPORLU2">
                                        <span></span>
                                        <span class="check"></span>
                                        <span class="box"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <input style="float:right;margin: 10px;" type="button" class="btn btn-success" v-on:click="Kaydet" value="Kaydet">
                    <input style="float:right;margin: 10px;" type="button" class="btn btn-success" v-on:click="Yazdir" value="Raporla">
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../../../VueComponents/KonuAnaliziFiltreleri.js?v=3"></script>
<script src="../../../VueComponents/OgrenciBelgeKonuAnaliz.js?v=3"></script>
<script>
    var vue = new Vue({
        el: "#app",
        name: "OgrenciBelgeGelisimRaporu.html",

        data: {
            TCKIMLIKNO: '',
            DONEM: '',
            ID_SINAVS: [],
            idsube: 0,
            idkademe3: 0,
            idsinif: 0,
            tcogrenci: '',
            idsinavturu: [],
            idkullanicitur: 0,
            aciklama: '',
            OOD: false,
            ETUTRAPORU: false
        },

        mounted() {
        },

        methods: {
            Yazdir: function (event) {
                var params = 'Sinav.GelisimRaporuOB@pdf' +
                             '@' + session.TCKIMLIKNO + '' +
                             '@' + session.OTURUM + '' +
                             '@' + this.DONEM + '' +
                             '@' + JSON.stringify(this.idsinavturu) + '' +
                             '@' + JSON.stringify(this.ID_SINAVS) + '' +
                             '@' + this.idsube + '' +
                             '@' + this.idsinif + '' +
                             '@' + this.tcogrenci + '' +
                             '@' + this.aciklama +
                             '@' + 0 +
                             '@' + (this.OOD ? 1 : 0) +
                             '@' + (this.ETUTRAPORU ? 1 : 0);
                console.log(params);
                var xForm = document.createElement("form");
                xForm.target = "rapor";
                xForm.method = "POST"; // or "post" if appropriate
                xForm.action = "../RaporPost.aspx";

                var xInput = document.createElement("input");
                xInput.type = "text";
                xInput.name = "p";
                xInput.value = params;
                xForm.appendChild(xInput);

                document.body.appendChild(xForm);

                map = window.open("", "rapor", "");

                if (map) {
                    xForm.submit();
                } else {
                    alert('Açılır sekmelere izin veriniz.');
                }
            },

            Kaydet: function () {
                var params = 'Sinav.GelisimRaporuOB@pdf' +
                             '@' + session.TCKIMLIKNO + '' +
                             '@' + session.OTURUM + '' +
                             '@' + this.DONEM + '' +
                             '@' + JSON.stringify(this.idsinavturu) + '' +
                             '@' + JSON.stringify(this.ID_SINAVS) + '' +
                             '@' + this.idsube + '' +
                             '@' + this.idsinif + '' +
                             '@' + this.tcogrenci + '' +
                             '@' + this.aciklama +
                             '@' + 1 +
                             '@' + (this.OOD ? 1 : 0) +
                             '@' + (this.ETUTRAPORU ? 1 : 0);

                var xForm = document.createElement("form");
                xForm.target = "rapor";
                xForm.method = "POST"; // or "post" if appropriate
                xForm.action = "../RaporKonuAnaliz.aspx";

                var xInput = document.createElement("input");
                xInput.type = "text";
                xInput.name = "p";
                xInput.value = params;
                xForm.appendChild(xInput);

                document.body.appendChild(xForm);

                map = window.open("", "rapor", "");

                if (map) {
                    xForm.submit();
                } else {
                    alert('Açılır sekmelere izin veriniz.');
                }
            },

            SubeSelected(item) {
                this.idsube = item;
                this.idkademe3 = 0;
                this.idsinif = 0;
            },

            Kademe3Selected(item) {
                this.idkademe3 = item;
                this.idsinif = 0;
            },

            SinifSelected(item) {
                this.idsinif = item;
                this.tcogrenci = "";
            },

            OgrenciSelected(item) {
                this.tcogrenci = item;
            },

            DonemSelected(item) {
                this.DONEM = item;
            },

            SinavTuruSelected(item) {
                this.idsinavturu = item;
            },

            SinavSelected(item) {
                this.ID_SINAVS = item;
            },
        },
    });
</script>
<script src="../../../Scripts/PublicMethods.js"></script>

<script src="../../../Scripts/Rapor/amcharts.js"></script>
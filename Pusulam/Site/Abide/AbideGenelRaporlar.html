<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title col-md-12">
        <h1>
           Upgrade Sınavı Rapor Oluştur <span onclick="YardimGoster(ID_MENU);" class="pull-right" style="cursor:pointer;"><img src="assets/global/img/info.gif" class="info-image-icon" /> </span>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>


<div class="row" id="app">
    <div class="col-md-12">
        <div class="portlet box blue-hoki dd-item" style="border:none">
            <div class="portlet-title dd-handle" data-toggle='collapse' data-target='#filters' style="cursor:pointer;">
                <div class="caption">
                    <i class="icon-magnifier"></i>
                    <span class="caption-subject bold uppercase"> Filtreler </span>
                    <span class="caption-helper"></span>
                </div>
                <div class='actions'>
                    <a href='javascript:;' class='btn btn-default btn-sm' style='border:none;'>
                        <i class='fa fa-chevron-down'></i>
                    </a>
                </div>
            </div>
            <!-- BEGIN PORTLET-->
            <div class="portlet-body form collapse in" id="filters">
                <form role="form" style="padding:12px 20px">
                    <div class="row" style="line-height:34px;">
                        <c-donem controller="AbideSinavRaporOlustur"
                                 @OnChange="DonemSelected">
                        </c-donem>
                    </div>
                    <div class="row" style="line-height:34px;">
                        <c-sinavgrup3 controller="AbideSinavRaporOlustur"
                                      :idsube="0"
                                      @OnChange="Kademe3Selected">
                        </c-sinavgrup3>
                    </div>
                    <div class="row" style="line-height:34px;">
                        <c-abide-sinav controller="AbideSinavRaporOlustur"
                                       :donem="DONEM"
                                       :idkademe3="ID_KADEME3"
                                       :idset="ID_ABIDESINAV"
                                       @OnChange="SinavSelected">
                        </c-abide-sinav>
                    </div>
                    <!--<div class="row" style="line-height:34px;">
                        <c-sube controller="AbideSinavRaporOlustur"
                                @OnChange="SubeSelected">
                        </c-sube>
                    </div>
                    <div class="row" style="line-height:34px;">
                        <c-sinavgrup controller="AbideSinavRaporOlustur"
                                     :idsube="ID_SUBE"
                                     @OnChange="Kademe3Selected">
                        </c-sinavgrup>
                    </div>
                    <div class="row" style="line-height:34px;">
                        <c-sinif-donem controller="AbideSinavRaporOlustur"
                                       :idsube="ID_SUBE"
                                       :idkademe3="ID_KADEME3"
                                       :donem="DONEM"
                                       @OnChange="SinifSelected">
                        </c-sinif-donem>
                    </div>-->
                    <div class="row">
                        <div class="form-group" style="margin-top:10px;">
                            <div class="col-md-12 text-right">
                                <button type="button" class="btn green" @click="PuanaGoreSiraliGenelSonucListesi">Puana Göre Sıralı Genel Sonuç Listesi</button>
                            </div>
                            <div class="col-md-12 text-right" style="margin-top:10px;">
                                <button type="button" class="btn green" @click="SiniflaraGoreSorularinCozulmeOranlari">Sınıflara Göre Soruların Çözülme Oranları</button>
                            </div>
                            <div class="col-md-12 text-right" style="margin-top:10px;">
                                <button type="button" class="btn green" @click="YeterlilikDuzeylerineGoreKampusOgrenciSayilari">Yeterlilik Düzeylerine Göre Kampüs Öğrenci Sayıları</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="VueComponents/SinavFiltreleri.js"></script>
<script src="VueComponents/Abide/Filtreler.js"></script>
<script src="VueComponents/SubeGrupSinif.js?v=3"></script>

<script>
    var vue = new Vue({
        el: "#app",
        name: "AbideSinavRaporOlustur.html",

        data: {
            DONEM: '',
            ID_ABIDESINAV: 0,
            //ID_SUBE: 0,
            ID_KADEME3: 0,
            //ID_SINIF: 0,
            //OGRENCILIST: [],
            //TCKIMLIKNO: '',
        },

        mounted() {
        },

        methods: {
            DonemSelected(DONEM) {
                this.DONEM = DONEM;
            },

            SinavSelected(ID_ABIDESINAV) {
                this.ID_ABIDESINAV = ID_ABIDESINAV;
            },

            Kademe3Selected(ID_KADEME3) {
                this.ID_KADEME3 = ID_KADEME3;
                this.ID_ABIDESINAV = 0;
            },

            //SubeSelected(ID_SUBE) {
            //    this.ID_SUBE = ID_SUBE;
            //},

            //Kademe3Selected(ID_KADEME3) {
            //    this.ID_KADEME3 = ID_KADEME3;
            //},

            //SinifSelected(ID_SINIF) {
            //    this.ID_SINIF = ID_SINIF;
            //},

            //OgrenciListele() {
            //    if (this.ID_ABIDESINAV > 0 && this.ID_SINIF > 0) {
            //        var p = {
            //            TCKIMLIKNO: session.TCKIMLIKNO,
            //            OTURUM: session.OTURUM,
            //            ID_ABIDESINAV: this.ID_ABIDESINAV,
            //            ID_SINIF: this.ID_SINIF
            //        };

            //        WebPost(this, 'AbideSinavRaporOlustur', 'OgrenciListeleRapor', p, '', '', function (data, parent) {
            //            if (data != null && data != '[]') {
            //                vue.OGRENCILIST = JSON.parse(data);
            //            } else {
            //                vue.OGRENCILIST = [];
            //                Alert_Warning("Bir hata oluştu!");
            //            }
            //        });
            //    } else {
            //        this.OGRENCILIST = [];
            //        Alert_Info("Sınıv ve sınıf seçimi yaptığınızdan emin olunuz.");
            //    }
            //},

            PuanaGoreSiraliGenelSonucListesi() {
                if (this.ID_ABIDESINAV > 0) {
                    window.open("RaporAbideGenel.aspx?raporTur=PDF&rapor=Abide.AbidePuanaGoreGenelSonucListe&p=" + session.TCKIMLIKNO + ";" + session.OTURUM + ";" + this.ID_ABIDESINAV + ";" + this.ID_KADEME3);
                } else {
                    Alert_Warning("Lüften bir sınav seçiniz!");
                }
            },

            SiniflaraGoreSorularinCozulmeOranlari() {
                if (this.ID_ABIDESINAV > 0) {
                    window.open("RaporAbideGenel.aspx?raporTur=PDF&rapor=Abide.AbideSiniflaraGoreSorularinCozulmeOranlari&p=" + session.TCKIMLIKNO + ";" + session.OTURUM + ";" + this.ID_ABIDESINAV + ";" + this.ID_KADEME3);
                } else {
                    Alert_Warning("Lüften bir sınav seçiniz!");
                }
            },

            YeterlilikDuzeylerineGoreKampusOgrenciSayilari() {
                if (this.ID_KADEME3 > 0) {
                    //window.open("Rapor.aspx?raporTur=PDF&rapor=Abide.AbideYeterlilikDuzeylerineGoreKampusOgrenciSayilari&p=" + session.TCKIMLIKNO + ";" + session.OTURUM + ";" + 11);
                    window.open("RaporAbideGenel.aspx?raporTur=PDF&rapor=Abide.AbideYeterlilikDuzeylerineGoreKampusOgrenciSayilari&p=" + session.TCKIMLIKNO + ";" + session.OTURUM + ";" + this.ID_ABIDESINAV + ";" + this.ID_KADEME3 + ";" + this.DONEM);
                } else {
                    Alert_Warning("Lüften bir grup seçiniz!");
                }
            }
        }
    });
</script>

<script src="Scripts/PublicMethods.js"></script>